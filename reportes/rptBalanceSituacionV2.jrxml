<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptBalanceSituacionV2" pageWidth="612" pageHeight="792" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="5ac19e05-6557-4630-b8d3-5de6507c3dc2">
	<property name="ireport.zoom" value="2.357947691000003"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="371"/>
	<parameter name="empresa" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="cedulajuridica" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="ruta" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="periodo_inicio" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="periodo_final" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select   a.intervalo,
		 b.idcuentamayor,
         b.idsubcuentamayor,
		 b.idcuentamenor,
		 concat(b.idcuentamayor,'-',b.idsubcuentamayor) cuentaKey,
		 b.cuentamayor,
		 b.subcuentamayor,
		 b.cuentamenor,
		 sum(a.balance_final)
from conta.balances a
inner join conta.cuentacompuesta b on a.idcuentacompuesta  = b.idcuentacompuesta
where  a.intervalo between $P{periodo_inicio} and $P{periodo_final} and
concat(b.idcuentamayor,'-',b.idsubcuentamayor) in ('100-000','100-001','200-000','200-001','300-000')
group by
		 a.intervalo,
		 b.idcuentamayor,
         b.idsubcuentamayor,
		 b.idcuentamenor,
		 concat(b.idcuentamayor,'-',b.idsubcuentamayor) ,
 b.cuentamayor,
b.subcuentamayor,
		 b.cuentamenor

order by
a.intervalo,
		 b.idcuentamayor,
         b.idsubcuentamayor,
		 b.idcuentamenor,
		 concat(b.idcuentamayor,'-',b.idsubcuentamayor),
 b.cuentamayor,
		 b.subcuentamayor,
		 b.cuentamenor]]>
	</queryString>
	<field name="intervalo" class="java.lang.Integer"/>
	<field name="idcuentamayor" class="java.lang.String"/>
	<field name="idsubcuentamayor" class="java.lang.String"/>
	<field name="idcuentamenor" class="java.lang.String"/>
	<field name="cuentakey" class="java.lang.String"/>
	<field name="cuentamayor" class="java.lang.String"/>
	<field name="subcuentamayor" class="java.lang.String"/>
	<field name="cuentamenor" class="java.lang.String"/>
	<field name="sum" class="java.lang.Double"/>
	<variable name="sum_1" class="java.lang.Double" resetType="Group" resetGroup="cuentamayor" calculation="Sum">
		<variableExpression><![CDATA[$F{sum}]]></variableExpression>
	</variable>
	<variable name="sum_2" class="java.lang.Double" resetType="Group" resetGroup="cuentamenor" calculation="Sum">
		<variableExpression><![CDATA[$F{sum}]]></variableExpression>
	</variable>
	<variable name="sum_3" class="java.lang.Double" resetType="Group" resetGroup="idsubcuentamayor" calculation="Sum">
		<variableExpression><![CDATA[$F{sum}]]></variableExpression>
	</variable>
	<group name="cuentamayor">
		<groupExpression><![CDATA[$F{cuentamayor}]]></groupExpression>
		<groupHeader>
			<band height="20">
				<rectangle>
					<reportElement x="0" y="0" width="572" height="20" forecolor="#FFFFFF" backcolor="#C3E9E9" uuid="f4c7f9ee-1a0f-41f3-8ede-11445c426151"/>
				</rectangle>
				<textField>
					<reportElement x="3" y="0" width="100" height="20" forecolor="#000000" uuid="dc2ff99a-5bd6-4c38-bbcc-1e39af7f25d3"/>
					<textElement verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{cuentamayor}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="27">
				<textField pattern="#,##0.00;-#,##0.00">
					<reportElement x="470" y="3" width="102" height="20" uuid="e9df257f-7c2f-495a-ab65-dddc27b4082b"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{sum_1}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="472" y="2" width="100" height="1" uuid="3f37c2ad-18a8-4213-8218-787af2cbd31e"/>
				</line>
				<line>
					<reportElement x="472" y="23" width="100" height="1" uuid="44d93c48-bfb9-4eff-b2f6-9a1ba170d891"/>
				</line>
			</band>
		</groupFooter>
	</group>
	<group name="idsubcuentamayor">
		<groupExpression><![CDATA[$F{idsubcuentamayor}]]></groupExpression>
		<groupHeader>
			<band height="22">
				<textField>
					<reportElement x="47" y="0" width="346" height="20" uuid="65710a32-bdbe-461f-9f69-baad75d56e69"/>
					<textElement verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{subcuentamayor}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="20">
				<textField pattern="#,##0.00;-#,##0.00">
					<reportElement x="474" y="0" width="96" height="20" uuid="5e752539-68f1-43c6-97ca-4ed1d6174f53"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$V{sum_3}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<group name="cuentamenor">
		<groupExpression><![CDATA[$F{cuentamenor}]]></groupExpression>
		<groupHeader>
			<band/>
		</groupHeader>
		<groupFooter>
			<band/>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="79" splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="120" splitType="Stretch">
			<textField pattern="dd-MMM-yy">
				<reportElement x="521" y="4" width="51" height="8" uuid="037d4777-6ca4-4e5e-9d22-58ce7581d70c"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="498" y="24" width="23" height="9" uuid="a511c3a6-ff4e-4d6a-aecb-4d0c97b5012e"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<text><![CDATA[Hora    :]]></text>
			</staticText>
			<textField evaluationTime="Report">
				<reportElement x="541" y="34" width="29" height="8" uuid="9d73bdc9-95c8-4609-a600-25b4aa47ea09"/>
				<textElement verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="169" y="76" width="256" height="22" uuid="735eb190-1258-4de4-bf14-4c13ec6feebe"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="18" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[BALANCE DE SITUACION]]></text>
			</staticText>
			<line>
				<reportElement x="496" y="13" width="78" height="1" uuid="600bd5dc-f5ab-44da-a5ba-d75eddafe35c"/>
				<graphicElement>
					<pen lineWidth="0.5"/>
				</graphicElement>
			</line>
			<rectangle radius="2">
				<reportElement x="496" y="4" width="78" height="39" uuid="db56516d-2f83-4340-ae88-a69093ec4afd"/>
				<graphicElement>
					<pen lineWidth="0.5"/>
				</graphicElement>
			</rectangle>
			<line>
				<reportElement x="496" y="33" width="78" height="1" uuid="4e577f07-dd8c-4ae5-a5fd-51b7193f1ed4"/>
				<graphicElement>
					<pen lineWidth="0.5"/>
				</graphicElement>
			</line>
			<textField pattern="h.mm a">
				<reportElement x="521" y="23" width="51" height="10" uuid="1854676f-b931-419a-97c7-546cbc7fc4bd"/>
				<textElement verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="496" y="23" width="78" height="1" uuid="9022c923-b933-46c4-b486-255654c30970"/>
				<graphicElement>
					<pen lineWidth="0.5"/>
				</graphicElement>
			</line>
			<textField>
				<reportElement x="201" y="45" width="176" height="20" uuid="2d6fff3f-ac27-4ef4-8bdd-4c155306c766"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{cedulajuridica}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="496" y="34" width="45" height="8" uuid="47bdf61f-ca4b-475c-a728-884e010be14a"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA["PÃ¡gina "+$V{PAGE_NUMBER}+"/"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="201" y="25" width="176" height="20" uuid="d3b89a71-5c45-42a7-befe-05c995a84b2e"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{empresa}]]></textFieldExpression>
			</textField>
			<image>
				<reportElement x="5" y="3" width="196" height="42" uuid="ec446cf7-1784-4139-8241-a5a577e684fb"/>
				<imageExpression><![CDATA[$P{ruta}+"head.jpg"]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="498" y="14" width="76" height="9" uuid="beed2969-cd97-4f2f-9023-ed713a62718b"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<text><![CDATA[Usuario: Sistema]]></text>
			</staticText>
			<staticText>
				<reportElement x="498" y="4" width="23" height="9" uuid="05b17553-da2c-4adb-81fe-1cb26c70f081"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<text><![CDATA[Fecha  :]]></text>
			</staticText>
			<staticText>
				<reportElement x="192" y="100" width="69" height="20" uuid="fa6a7bba-afaa-4464-a16e-422430f0e9e6"/>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[Periodo desde:]]></text>
			</staticText>
			<textField>
				<reportElement x="267" y="100" width="49" height="20" uuid="1ead342b-f3ae-4330-8f54-059e146ca6b4"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$P{periodo_inicio}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="322" y="100" width="27" height="20" uuid="2f10022d-715b-4520-82b2-8bef5d2d225c"/>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[hasta]]></text>
			</staticText>
			<textField>
				<reportElement x="357" y="100" width="51" height="20" uuid="dec65eb8-57fe-4ee2-8823-79fdaa1ea331"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$P{periodo_final}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="15" splitType="Stretch">
			<textField>
				<reportElement x="69" y="0" width="274" height="15" uuid="31d8e184-cc26-4460-812d-93930e6fed32"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{cuentamenor}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00;-#,##0.00">
				<reportElement x="343" y="0" width="100" height="15" uuid="47b66971-04d1-4446-b39b-1406d0e49541"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{sum}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
